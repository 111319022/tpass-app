<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TPASS回本計算機</title>
    <link rel="apple-touch-icon" href="/images/icon.png">
    <link rel="icon" type="image/png" href="/images/icon.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/intro.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>

    <div id="loadingOverlay" class="loading-overlay">
        <div class="loader-content">
            <i class="fa-solid fa-train-subway fa-bounce"></i>
            <p>正在確認身分...</p>
        </div>
    </div>

    <div id="mainContainer" class="intro-container" style="display: none;">
        <div class="slider" id="slider">
            
            <div class="card">
                <div class="card-content welcome-card">
                    <h1 class="welcome-title">歡迎來到<br>TPASS回本計算機</h1>
                    <p class="author-tag">By Raaay</p>
                    
                    <div class="welcome-deco">
                        <i class="fa-solid fa-train-subway"></i>
                        <i class="fa-solid fa-bus"></i>
                        <i class="fa-solid fa-bicycle"></i>
                    </div>

                    <div class="quick-access">
                        <button id="quickLoginBtn" class="quick-login-btn">
                            <i class="fa-brands fa-google"></i> 直接登入
                        </button>
                        <div class="swipe-hint">
                            滑動查看更多 <i class="fa-solid fa-arrow-right-long"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-content">
                    <div class="icon-circle">
                        <i class="fa-solid fa-bus"></i>
                    </div>
                    <h2>通勤，也要精打細算</h2>
                    <p>專為基北北桃通勤族打造。<br>1200 買下去，到底有沒有回本？<br>讓我們幫你算清楚。</p>
                </div>
            </div>

            <div class="card">
                <div class="card-content">
                    <div class="icon-circle" style="background: #2ecc71;">
                        <i class="fa-solid fa-calculator"></i>
                    </div>
                    <h2>智慧轉乘與優惠</h2>
                    <p>自動扣除轉乘優惠 ($8/$6)。<br>支援「常客優惠」階梯回饋<br>與「TPASS 2.0」運具補貼計算。</p>
                </div>
            </div>

            <div class="card">
                <div class="card-content">
                    <div class="icon-circle" style="background: #f39c12;">
                        <i class="fa-solid fa-calendar-days"></i>
                    </div>
                    <h2>彈性週期設定</h2>
                    <p>不限於每月 1 號！<br>自訂月票啟用日，<br>自動計算 30 天效期內的每一筆回饋。</p>
                </div>
            </div>

            <div class="card">
                <div class="card-content">
                    <div class="icon-circle" style="background: #e17055;">
                        <i class="fa-solid fa-chart-line"></i>
                    </div>
                    <h2>深度數據儀表板</h2>
                    <p>全新推出「通勤熱力圖」與「回本競速」。<br>視覺化分析您的平日/假日貢獻，<br>與每一筆支出的詳細結構。</p>
                </div>
            </div>

            <div class="card">
                <div class="card-content">
                    <div class="icon-circle" style="background: #8e44ad;">
                        <i class="fa-solid fa-dna"></i>
                    </div>
                    <h2>Commuter DNA</h2>
                    <p>您是「北捷成癮者」還是「公車達人」？<br>根據您的搭乘習慣解鎖專屬獎章。<br>讓記帳變得更有成就感！</p>
                </div>
            </div>

            <div class="card">
                <div class="card-content">
                    <div class="icon-circle" style="background: #00cec9;">
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                    </div>
                    <h2>雲端同步紀錄</h2>
                    <p>資料跟著 Google 帳號走，<br>可跨裝置查看資料，不怕手機遺失。</p>
                </div>
            </div>

            <div class="card" id="pwa-card">
                <div class="card-content pwa-card">
                    <div class="icon-circle" style="background: #0984e3;">
                        <i class="fa-solid fa-mobile-screen-button"></i>
                    </div>
                    <h2>安裝為 App</h2>
                    <p style="margin-bottom:15px;">獲得更佳的全螢幕體驗，操作更流暢。</p>
                    <div class="pwa-instructions">
                        <div class="pwa-step">
                            <div class="step-icon"><i class="fa-brands fa-apple"></i></div>
                            <div class="step-text">
                                <strong>iOS (Safari)</strong><br>
                                點擊「分享」<i class="fa-solid fa-arrow-up-from-bracket"></i> → 選「加入主畫面」。
                            </div>
                        </div>
                        <div class="pwa-step">
                            <div class="step-icon"><i class="fa-brands fa-android"></i></div>
                            <div class="step-text">
                                <strong>Android (Chrome)</strong><br>
                                選單 <i class="fa-solid fa-ellipsis-vertical"></i> → 選「安裝應用程式」。
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-content">
                    <div class="icon-circle" style="background: #2c3e50;">
                        <i class="fa-solid fa-user-check"></i>
                    </div>
                    <h2>開始使用</h2>
                    <p>請先選擇您的票種身分，<br>這將影響轉乘優惠的計算金額。</p>

                    <div class="identity-selection">
                        <label class="id-option">
                            <input type="radio" name="identity" value="adult" checked>
                            <div class="id-box">
                                <i class="fa-solid fa-user"></i>
                                <span>全票 (成人)</span>
                                <small>轉乘折 $8</small>
                            </div>
                        </label>
                        <label class="id-option">
                            <input type="radio" name="identity" value="student">
                            <div class="id-box">
                                <i class="fa-solid fa-graduation-cap"></i>
                                <span>學生票</span>
                                <small>轉乘折 $6</small>
                            </div>
                        </label>
                    </div>

                    <button id="startBtn" class="google-btn">
                        <i class="fa-brands fa-google"></i> 登入並開始
                    </button>
                </div>
            </div>

        </div>

        <div class="controls">
            <button id="prevBtn" class="nav-btn hidden">
                <i class="fa-solid fa-chevron-left"></i>
            </button>
            
            <div class="dots" id="dots"></div>
            
            <button id="nextBtn" class="nav-btn">
                <i class="fa-solid fa-chevron-right"></i>
            </button>
        </div>
    </div>

<div id="update-notification" style="
    display: none;
    position: fixed;
    /* 底部稍微抬高一點，避開圓角螢幕邊緣 */
    bottom: max(30px, env(safe-area-inset-bottom) + 30px);
    left: 50%;
    transform: translateX(-50%);
    
    /* 寬度設定：改成 95% 讓它幾乎跟手機一樣寬 */
    width: 95%;            
    max-width: 500px;      /* 電腦版限制放寬到 500px */
    box-sizing: border-box;
    
    /* 排版設定 */
    /* 注意：JS 會把 display 改成 flex，這裡預設 none */
    align-items: center;
    justify-content: space-between;
    gap: 15px;
    
    background-color: #2d3436; /* 稍微深一點的灰，比較有質感 */
    color: white;
    
    /* 內距加大，讓整體變高變寬 */
    padding: 20px 25px;    
    border-radius: 16px;   /* 圓角加大 */
    box-shadow: 0 8px 32px rgba(0,0,0,0.45); /* 陰影加重，更立體 */
    z-index: 10000;
    
    /* 字體設定 */
    font-size: 16px;       /* 字變大 (原 14px) */
    font-weight: 500;
    line-height: 1.5;      /* 增加行高，閱讀更舒適 */
">
    <span style="flex: 1;">✨ 發現新版本，請更新以獲得最新功能！</span>
    
    <button id="reload-btn" style="
        background: #2ecc71;
        border: none;
        color: white;
        /* 按鈕加大 */
        padding: 10px 20px;    
        border-radius: 50px;
        cursor: pointer;
        font-weight: bold;
        white-space: nowrap;
        font-size: 15px;       /* 按鈕字也加大 */
        box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3); /* 按鈕發光效果 */
    ">立即更新</button>
</div>

    <script type="module" src="/js/intro.js"></script>
    <script src="js/pwa-update.js"></script>
</body>
</html>